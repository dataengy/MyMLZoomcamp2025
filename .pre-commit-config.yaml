---
repos:
    - repo: local
      hooks:
          # Python + Notebook linting and formatting (ruff handles .ipynb natively)
          # Uses `uv run` to execute tools from the project lockfile/virtual env,
          # ensuring consistent versions without relying on globally installed binaries.
          # Tip: run locally with `pre-commit run ruff --all-files` or
          # `uv run ruff check --fix <path>` for targeted fixes.
          - id: ruff
            name: ruff
            entry: uv run ruff check --fix
            language: system
            types_or: [python, jupyter]
          - id: ruff-format
            name: ruff format
            entry: uv run ruff format
            language: system
            types_or: [python, jupyter]
          - id: nbstripout
            name: nbstripout (strip notebook outputs)
            entry: uv run nbstripout
            language: system
            types: [jupyter]

          # Shell formatting and linting
          # `shfmt` rewrites files in-place (-w); use `shfmt -d` to preview diffs.
          # `shellcheck` only reports issues; it does not rewrite files.
          - id: shfmt
            name: shfmt
            entry: shfmt -w -i 2 -ci
            language: system
            files: \.sh$
          - id: shellcheck
            name: shellcheck
            entry: shellcheck
            language: system
            files: \.sh$

#          # Just formatting
#          # Requires `just` v1.14+ with unstable fmt; runs formatting in check mode.
#          # Use `just --unstable --fmt` to apply formatting manually.
#          - id: just-fmt
#            name: just --unstable --fmt --check
#            entry: just --unstable --fmt --check
#            language: system
#            files: (^|/)(Justfile|.*\.just)$
#            pass_filenames: false

          # Run tests (optional - can be slow)
          # `pass_filenames: false` runs the full suite; expect longer runtimes.
          # Enable only if you want tests on every commit.
          # Uncomment to run tests on every commit
          # - id: pytest
          #   name: pytest
          #   entry: uv run pytest -q
          #   language: system
          #   pass_filenames: false
          #   stages: [commit]

          # - id: test-notebooks-sanitized
          #   Runs the repo's notebook sanitizer script; keep disabled if notebooks
          #   are large or frequently changing.
          #   name: check notebooks sanitized
          #   entry: ./scripts/notebooks/check_sanitized.sh
          #   language: system
          #   pass_filenames: false
          #   files: \.ipynb$

    - repo: https://github.com/pre-commit/pre-commit-hooks
      rev: v6.0.0
      hooks:
          - id: check-merge-conflict
#          - id: check-yaml
          - id: end-of-file-fixer
          - id: trailing-whitespace
          # These hooks run fast and are safe to keep enabled for all commits.

    #readme: https://chatgpt.com/g/g-p-67ca07e56db48191aa5e98c20606814b-makefile-justfile/c/6981f278-65f8-8397-9c49-107d282469aa
    #https://github.com/checkmake/checkmake?tab=readme-ov-file#checkmake:
    # - checkmake is a linter for Makefiles. It scans Makefiles for potential issues based on configurable rules.
    - repo: https://github.com/mrtazz/checkmake
      rev: 0.2.2
      hooks:
          - id: checkmake
            files: (^|/)(Makefile|.*\.mk)$

#    - repo: https://github.com/adrienverge/yamllint
#      rev: v1.37.1
#      hooks:
#          - id: yamllint
#            files: \.(yml|yaml)$
#            args: [-c, config/linters/yamllint.yaml]

#    - repo: https://github.com/jumanjihouse/pre-commit-hook-yamlfmt
#      rev: 0.2.1
#      hooks:
#          - id: yamlfmt
#            files: \.(yml|yaml)$
